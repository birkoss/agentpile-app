<ion-menu [content]="content" (ionClose)="menuClosed()">

  <ion-header>

<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 253 190" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
<style type="text/css">
  .st0{fill:#FFFFFF;}
  .st1{fill-rule:evenodd;clip-rule:evenodd;fill:#FAB73A;}
  .st2{fill-rule:evenodd;clip-rule:evenodd;fill:#FFFFFF;}
</style>
<g id="XMLID_1851_">
  <path id="XMLID_1872_" class="st0" d="M119.7,178.6c-2.1-1.9-4.9-3-7.8-3h-39c-1.8,0-3.3-1.5-3.3-3.3v-65.5h-3.4v71.7H119.7z
     M129.3,130.7v41.9c3.1-2.2,6.8-3.5,10.8-3.5h35.7V97.3h-35.7c-5.2,0-10.2,4.1-10.8,6.9V130.7z M122.7,134v-29.8
    c-0.6-2.8-5.6-6.9-10.8-6.9H76.2v71.7h35.7c4,0,7.7,1.3,10.8,3.5V134z M132.3,178.6h53.6v-71.7h-3.4v65.5c0,1.8-1.5,3.3-3.3,3.3
    h-39C137.1,175.6,134.4,176.7,132.3,178.6z M128.8,185.2H62.9c-1.8,0-3.3-1.5-3.3-3.3v-78.3c0-4.3,5.6-3.3,10-3.3
    c0-4.1-1-9.5,3.3-9.5h39c5.5,0,10.7,2.5,14.1,6.6c3.5-4.1,8.6-6.6,14.1-6.6h39c4.3,0,3.3,5.4,3.3,9.5c4.4,0,10-1,10,3.3v78.3
    c0,1.8-1.5,3.3-3.3,3.3H128.8z"/>
  <path id="XMLID_1861_" class="st1" d="M83.5,129.3h31.9v6.6H83.5V129.3z M83.5,141.9h31.9v6.6H83.5V141.9z M83.5,154.5h15.9v6.6
    H83.5V154.5z M83.5,116.7h31.9v6.6H83.5V116.7z M136.6,129.3h31.9v6.6h-31.9V129.3z M136.6,141.9h31.9v6.6h-31.9V141.9z
     M136.6,154.5h15.9v6.6h-15.9V154.5z M136.6,116.7h31.9v6.6h-31.9V116.7z M152.5,104.1h15.9v6.6h-15.9V104.1z M99.5,104.1h15.9v6.6
    H99.5V104.1z"/>
  <path id="XMLID_1856_" class="st1" d="M38.3,4.8c18.8,0,34.1,6.1,34.1,13.5c0,2.2-1.3,4.2-3.6,6c0.2-0.5,0.3-1.1,0.3-1.6
    c0-6.7-13.8-12.2-30.8-12.2c-17,0-30.8,5.5-30.8,12.2c0,0.6,0.1,1.1,0.3,1.6c-2.3-1.8-3.6-3.9-3.6-6C4.2,10.9,19.5,4.8,38.3,4.8
    L38.3,4.8z M213.7,4.8c-18.8,0-34.1,6.1-34.1,13.5c0,2.2,1.3,4.2,3.6,6c-0.2-0.5-0.3-1.1-0.3-1.6c0-6.7,13.8-12.2,30.8-12.2
    c17,0,30.8,5.5,30.8,12.2c0,0.6-0.1,1.1-0.3,1.6c2.3-1.8,3.6-3.9,3.6-6C247.8,10.9,232.5,4.8,213.7,4.8z M205.5,51.1
    c-8.3,0-15.8,1.5-20.7,3.9l6.6,1.6c3.9-1.2,8.8-1.9,14.1-1.9c13,0,23.6,4.2,23.6,9.3c0,1.5-0.9,2.9-2.4,4.1c3.5-1.8,5.6-4,5.6-6.4
    C232.2,55.9,220.2,51.1,205.5,51.1z M46.5,51.1c8.3,0,15.8,1.5,20.7,3.9l-6.6,1.6c-3.9-1.2-8.8-1.9-14.1-1.9
    c-13,0-23.6,4.2-23.6,9.3c0,1.5,0.9,2.9,2.4,4.1c-3.5-1.8-5.6-4-5.6-6.4C19.8,55.9,31.8,51.1,46.5,51.1z"/>
  <path id="XMLID_1853_" class="st2" d="M126,22.9c12.6,0,22.8,10.2,22.8,22.8c0,12.6-10.2,22.8-22.8,22.8
    c-12.6,0-22.8-10.2-22.8-22.8C103.2,33.1,113.4,22.9,126,22.9L126,22.9z M38.3,14.6c16.9,0,32.1,5.3,25,11L96,33.7
    c10.8-26.9,49.1-26.9,59.9,0l32.8-8.1c-7.2-5.7,8.1-11,25-11c14.7,0,26.7,3.6,26.7,8.1c0,4.5-12,8.1-26.7,8.1
    c-2.2,0-4.3-0.1-6.3-0.2l-49.1,15.1l-0.3,4.6l35.8,8.6c3.3-0.7,7.4-1.1,11.8-1.1c25.9,0,27.8,11.7,1.8,12.4
    c-6.2,0.2-15.1-0.5-20-3.3l-31.3-5.1c2.3,2.1,3.8,5.1,3.8,8.4v21.6c0,5.4-8.2,5.4-8.2,0V70.1c0-1.2-0.7-2.2-1.6-2.7
    c-12.8,14.1-34.9,14.1-47.7,0c-1,0.5-1.6,1.5-1.6,2.7v21.6c0,5.4-8.2,5.4-8.2,0V70.1c0-3.3,1.5-6.3,3.8-8.4l-31.3,5.1
    c-4.9,2.9-13.8,3.5-20,3.3c-26-0.8-24.1-12.4,1.8-12.4c4.4,0,8.4,0.4,11.8,1.1L94,50.3l-0.3-4.6L44.6,30.6c-2,0.2-4.2,0.2-6.3,0.2
    c-14.7,0-26.7-3.6-26.7-8.1C11.6,18.2,23.6,14.6,38.3,14.6z"/>
  <path id="XMLID_1852_" class="st1" d="M126,27c2.8,0,5.5,0.6,7.8,1.7c-1.3,1.2-2.1,2.9-2.1,4.8c0,3.6,2.9,6.5,6.5,6.5
    c1.9,0,3.6-0.8,4.8-2.1c1.1,2.4,1.7,5,1.7,7.8c0,10.4-8.4,18.8-18.8,18.8c-10.4,0-18.8-8.4-18.8-18.8C107.2,35.4,115.6,27,126,27
    L126,27z"/>
</g>
</svg>

    <h1>Agent Pile</h1>
  </ion-header>

  <ion-content>
    <ion-list>
      <ion-item>
        <div>Liste des agents</div>
        <button *ngIf="menuMode == 'normal'" color="secondary" item-end clear ion-button (tap)="setMode('edit')">
          Modifier
        </button>
        <button *ngIf="menuMode == 'edit'" color="secondary" item-end clear ion-button (tap)="setMode('normal')">
          Fermer
        </button>
      </ion-item>
      <button [ngClass]="{'is-active' : dataProvider.getActiveUser() == u.id}" menuClose ion-item *ngFor="let u of dataProvider.getUsers()" (tap)="loadUser(u)">
        <ion-icon name="book"></ion-icon>
        <div class="name">{{u.name}}</div>
        <div *ngIf="menuMode == 'normal'" class="status" item-end>{{ dataProvider.getSessions(u.id).length }} / {{ u.sessions }}</div>
        <button color="secondary" *ngIf="menuMode == 'edit'" item-end ion-button (tap)="editUser(u)">
          <ion-icon name="create"></ion-icon>
        </button>
      </button>
    </ion-list>

    <ion-fab bottom right>
      <button ion-fab mini color="secondary" (tap)="createUser()"><ion-icon name="add"></ion-icon></button>
    </ion-fab>

  </ion-content>

</ion-menu>

<!-- Disable swipe-to-go-back because it's poor UX to combine STGB with side menus -->
<ion-nav [root]="rootPage" #content swipeBackEnabled="false"></ion-nav>